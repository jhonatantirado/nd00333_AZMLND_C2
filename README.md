# Project: Operationalizing Machine Learning

In this project, you will continue to work with the Bank Marketing dataset. You will use Azure to configure a cloud-based machine learning production model, deploy it, and consume it. You will also create, publish, and consume a pipeline. In the end, you will demonstrate all of your work by creating a README file and a screencast video.

## Overview
The project is split in two parts.

### Train and deploy an AutoML model using Azure ML Studio

1. An AutoML model is trained using the Bank Marketing dataset we used for project 1. 
2. Then, we deploy the best model to an ACI (Azure Container Instance) using Azure ML Studio . 
3. Also, we enable the Application Insights feature and review the generated logs using the logs.py script.
4. Next, we publish the deployed model API swagger documentation by running a docker container in our localhost. We must download the endpoint swagger.json file from Azure ML for this.
5. After that, we consume the scoring API to clasify new instances by running the endpoint.py script in our localhost. We must get the scoring_uri and key for the deployed model endpoint and update the script.
6. Finally, we use Apache Benchmark to load-test the deployed model.

### Create, publish and consume a Pipeline for training an AutoML model, using a Jupyter Notebook and Azure ML SDK
1. An AutoML model is trained using the Bank Marketing dataset we used for project 1. 
2. In this case, however, we create a Pipeline, to automate the process and be able to repeat the process at any time.
3. Next, we examine the metrics and the best model, which used the Voting Ensemble algorithm.
4. Then, we test the model and examine the confusion metrics.
5. After that, we publish the pipeline to generate a REST endpoint that allows us to rerun the pipeline at any time using any tool that can submit HTTP requests like POSTMAN.
6. Finally, we send a request to the REST endpoint to rerun the pipeline.



## Architectural diagram

![AutoML model deployed to ACI](https://github.com/jhonatantirado/nd00333_AZMLND_C2/blob/master/images/Part1-AutoMLmodel-deployedACI.png)

![Pipeline for training AutoML model](https://github.com/jhonatantirado/nd00333_AZMLND_C2/blob/master/images/Part2-Pipeline.png)


## Future improvements

1. If the model is to be used by thousands of users, we can deploy the model to an Azure Kubernetes Cluster instead of an Azure Container Instance.
2. We can publish the API swagger documentation to Azure also, so it is available for any user.
3. We can automatically schedule the pipeline to retrain the AutoML model on a monthly basis. 
4. The pipeline can also be triggered when the bank marketing dataset is updated.
5. The pipeline can be extended to include a step to deploy the best model to AKS.


## Screenshots


1. Step 2

![Registered Datasets in ML Studio showing the Bankmarketing dataset available](https://github.com/jhonatantirado/nd00333_AZMLND_C2/blob/master/images/Step2-RegisteredDatasets.png)

![The experiment is shown as completed](https://github.com/jhonatantirado/nd00333_AZMLND_C2/blob/master/images/Step2-ExperimentCompleted.png)

![The best model after the experiment completes](https://github.com/jhonatantirado/nd00333_AZMLND_C2/blob/master/images/Step2-BestModel.png)



2. Step 4

![Application Insights is enabled in the Details tab of the endpoint](https://github.com/jhonatantirado/nd00333_AZMLND_C2/blob/master/images/Step3-AppInsightsEnabled.png)

![Logs generated by the logs.py script](https://github.com/jhonatantirado/nd00333_AZMLND_C2/blob/master/images/Step3-LogExecutionResults.png)


3. Step 5

![Swagger runs on localhost showing the HTTP API methods and responses for the model](https://github.com/jhonatantirado/nd00333_AZMLND_C2/blob/master/images/Step5-SwaggerScoreDescription.png)

4. Step 6

![endpoint.py script runs against the API producing JSON output from the model](https://github.com/jhonatantirado/nd00333_AZMLND_C2/blob/master/images/Step6-EndpointResponse.png)

![Apache Benchmark runs against the HTTP API using authentication keys to retrieve performance results](https://github.com/jhonatantirado/nd00333_AZMLND_C2/blob/master/images/Step6-ApacheBenmark-2.png)


5. Step 7

![Pipeline section of Azure ML Studio, showing that the pipeline has been created]
()

![Pipelines section in Azure ML Studio, showing the Pipeline Endpoint](https://github.com/jhonatantirado/nd00333_AZMLND_C2/blob/master/images/Step7-PipelineEndpoint.png)

![The Bankmarketing dataset with the AutoML module](https://github.com/jhonatantirado/nd00333_AZMLND_C2/blob/master/images/Step7-BankMktDataset.png)

![The Published Pipeline overview, showing a REST endpoint and a status of ACTIVE](https://github.com/jhonatantirado/nd00333_AZMLND_C2/blob/master/images/Step7-PublishedPipelineOverview.png)

![In Jupyter Notebook, showing the Use RunDetails Widget shows the step runs](https://github.com/jhonatantirado/nd00333_AZMLND_C2/blob/master/images/Step7-RunDetailsWidget.png)

![In ML Studio showing the scheduled run](https://github.com/jhonatantirado/nd00333_AZMLND_C2/blob/master/images/Step7-ScheduledRun.png)



## Screencast video on Youtube

[Screencast](https://www.youtube.com/watch?v=oNfYUSpA1-A)